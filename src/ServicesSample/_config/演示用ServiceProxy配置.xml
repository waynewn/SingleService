<?xml version='1.0' encoding="utf-8"?>
<application version="1.0.1" centerIp='127.0.0.1' centerPort='9001' comment="comment是写的注释,Services目录下的是演示用配置">
<runtime_ini comment="重启后才能生效">
            <item name="MICRO_SERVICE_MODULENAME" value="ServiceProxy" comment="如果系统里已经存在名为 ServiceProxy 的项目了，这里改下"/>
            <item name="EXPIRE_SECONDS_NODE_FAILED" value="300" comment="投递失败的节点，多久后再次尝试"/>
            <item name="MAX_TASK_NUM" value="10" comment="最大可fork的task任务数"/>
            <item name="PROXY_TIMEOUT" value="5" comment="proxy代理请求时超时的设置（单位秒）"/>
            <item name="MAX_REWRITE" value="20" comment="整个系统最多支持多少条rewrite"/>
            <item name="MAX_SERVICES" value="10" comment="整个系统最多支持多少个ServiceModule"/>
            <item name="MAX_NODE_PER_SERVICE" value="3" comment="每个ServiceModule最多有多少个node实例提供服务"/>
        </runtime_ini>	
        <log dir="" comment="日志存放路径，空表示存入默认的error_log里" />
	<monitor>
            <services ><service type='email' uri='/MailService/broker/sendAsync' comment="这里"/></services>
            <usergroup><group type='ErrorNode' data='user@test.com'/></usergroup>
        </monitor>
        <rewrite>
		<rule from="/aa/bb/c" to="/aa/bb/sayhi"/>
		<rule from="/aa/bb/cc" to="/aa/bb/sayhi_proxy"/>
	</rewrite>
	<node_templates>
		<template id="DataStatusServTpl" port="8007"        dir="/root/ServiceProxy/src/Services/DataStatus" comment="部署的路径，用于替换命令定义中{dir}">
			<cmds><stop cmd="{dir}/stop.sh" /><start cmd="{dir}/start.sh"/><ping cmd="{dir}/ping.sh" /></cmds>
			<serivices><module name='DataStatus'/></serivices>
		</template>            
		<template id="helloServTpl" port="8010"           dir="/root/ServiceProxy/src/Services/HelloWorld" comment="部署的路径，用于替换命令定义中{dir}">
			<cmds><stop cmd="{dir}/stop.sh"/><start cmd="{dir}/start.sh"/><ping cmd="{dir}/cmd.sh"/></cmds>
			<serivices><module name='hello' /></serivices>
		</template>
		<template id="mailServTpl" port="8008"        dir="/root/ServiceProxy/src/Services/Email" comment="部署的路径，用于替换命令定义中{dir}">
			<cmds><stop cmd="{dir}/stop.sh" /><start cmd="{dir}/start.sh"/><ping cmd="{dir}/ping.sh" /></cmds>
			<serivices><module name='MailService'/></serivices>
		</template>
		<template id="iniServTpl" port="8009"         dir="/root/ServiceProxy/src/Services/Ini" comment="部署的路径，用于替换命令定义中{dir}">
			<cmds><stop cmd="{dir}/stop.sh" /><start cmd="{dir}/start.sh"/><ping cmd="{dir}/ping.sh" /></cmds>
			<serivices><module name='ini'/></serivices>
		</template>                
	</node_templates>

	<servers comment="不支持一个ip上部署多个proxyserver">
		<server ip="127.0.0.1" proxyport="9002" comment="center要能访问到的地址">
			<nodes comment="该server里部署了的service node">
                                <instance name="mailServ01" templateId="mailServTpl"/>
				<instance name="hello01" templateId="helloServTpl" />
				<instance name="ini01" templateId="iniServTpl"  />
                                <instance name="dataStatus01" templateId="DataStatusServTpl"  />
			</nodes>
		</server>
	</servers>
</application>
