<?xml version='1.0' encoding="utf-8"?>
<application version="1.0.1" centerIp='127.0.0.1' centerPort='28080' comment="comment是写的注释">
	<rewrite>
		<rule from="/aa/bb/c" to="/aa/bb/sayhi"/>
	</rewrite>
	<log dir="/root/ServiceProxy/log" comment="日志存放路径"/>
	<monitor>
            <services >
                <service type='email' uri='/MailService/Broker/sendAsync'/>
            </services>
            <usergroup>
                <group type='ErrorNode' data='user1@test.com,user2@test.com'/>
            </usergroup>
        </monitor>

	<node_templates>
		<template id="business" port="8881" dir="/zylc/bin" comment="部署的路径，用于替换命令定义中{dir}">
			<cmds>
				<stop cmd="{dir}/business_1_stop.sh" comment="停止命令"/>
				<start cmd="{dir}/business_1_start.sh"/>
				<ping cmd="{dir}/business_1_cmd.sh" comment=" (健康检查，需要输出为ok表示正常工作中)"/>
			</cmds>
			<serivices>
				<module name='zybusiness' comment="(服务模块名：java项目工程名称)"/>
			</serivices>
		</template>
		<template id="paymentTpl" port="8882" dir="/zylc/bin" comment="部署的路径，用于替换命令定义中{dir}">
			<cmds>
				<stop cmd="{dir}/src/stop.sh" comment="停止命令"/>
				<start cmd="{dir}/src/start.sh"/>
				<ping cmd="{dir}/src/cmd.sh" comment=" (健康检查，需要输出为ok表示正常工作中)"/>
			</cmds>
			<serivices>
				<module name='payment' comment="(服务模块名：java项目工程名称)"/>
			</serivices>
		</template>
		<template id="settlementTpl" port="8883" dir="/zylc/bin" comment="部署的路径，用于替换命令定义中{dir}">
			<cmds>
				<stop cmd="{dir}/src/stop.sh" comment="停止命令"/>
				<start cmd="{dir}/src/start.sh"/>
				<ping cmd="{dir}/src/cmd.sh" comment=" (健康检查，需要输出为ok表示正常工作中)"/>
			</cmds>
			<serivices>
				<module name='ZYSettlement' comment="(服务模块名：java项目工程名称)"/>
			</serivices>
		</template>
		<template id="zyAssignAccountTpl" port="9882" dir="/zylc/bin" comment="部署的路径，用于替换命令定义中{dir}">
			<cmds>
				<stop cmd="{dir}/src/stop.sh" comment="停止命令"/>
				<start cmd="{dir}/src/start.sh"/>
				<ping cmd="{dir}/src/cmd.sh" comment=" (健康检查，需要输出为ok表示正常工作中)"/>
			</cmds>
			<serivices>
				<module name='zyAssignAccount' comment="(服务模块名：java项目工程名称)"/>
			</serivices>
		</template>
		<template id="php" port="18888" dir="/zylc/bin" comment="部署的路径，用于替换命令定义中{dir}">
			<cmds>
				<stop cmd="{dir}/src/stop.sh" comment="停止命令"/>
				<start cmd="{dir}/src/start.sh"/>
				<ping cmd="{dir}/src/cmd.sh" comment=" (健康检查，需要输出为ok表示正常工作中)"/>
			</cmds>
			<serivices>
				<module name='tests1' comment="(服务模块名：PHP项目工程名称)"/>
				<module name='platform1' comment="(服务模块名：PHP项目工程名称)"/>
				<module name='actives1' comment="(服务模块名：PHP项目工程名称)"/>
				<module name='manage1' comment="(服务模块名：PHP项目工程名称)"/>
				<module name='tests' comment="(服务模块名：PHP项目工程名称)"/>
				<module name='manage' comment="(服务模块名：PHP项目工程名称)"/>
			</serivices>
		</template>
		<template id="zyAssignTransTpl" port="9881" dir="/zylc/bin" comment="部署的路径，用于替换命令定义中{dir}">
			<cmds>
				<stop cmd="{dir}/src/stop.sh" comment="停止命令"/>
				<start cmd="{dir}/src/start.sh"/>
				<ping cmd="{dir}/src/cmd.sh" comment=" (健康检查，需要输出为ok表示正常工作中)"/>
			</cmds>
			<serivices>
				<module name='assignTrans' comment="(服务模块名：java项目工程名称)"/>
			</serivices>
		</template>
		<template id="zyAssignTransTpl" port="9881" dir="/zylc/bin" comment="部署的路径，用于替换命令定义中{dir}">
			<cmds>
				<stop cmd="{dir}/src/stop.sh" comment="停止命令"/>
				<start cmd="{dir}/src/start.sh"/>
				<ping cmd="{dir}/src/cmd.sh" comment=" (健康检查，需要输出为ok表示正常工作中)"/>
			</cmds>
			<serivices>
				<module name='assignTrans' comment="(服务模块名：java项目工程名称)"/>
			</serivices>
		</template>
		<template id="mailServTpl" port="8008" dir="/root/ServiceProxy" comment="部署的路径，用于替换命令定义中{dir}">
			<cmds>
				<stop cmd="{dir}/src/unset.sh" comment="停止命令"/>
				<start cmd="{dir}/src/unset.sh"/>
				<ping cmd="{dir}/src/EmailPing.sh" comment=" (健康检查，需要输出为ok表示正常工作中)"/>
			</cmds>
			<serivices>
				<module name='MailService' comment="(服务模块名：请求路径的根节点目录名)"/>
			</serivices>
		</template> 
	</node_templates>

	<servers comment="不支持一个ip上部署多个proxyserver">
		<server ip="127.0.0.1" proxyport="8899" comment="center要能访问到的地址">
			<nodes comment="该server里部署了的service node">
				<instance name="php01" templateId="php" />
				<instance name="mailServ01" templateId="mailServTpl"/>

				<instance name="business01" templateId="business" />
				<instance name="business02" templateId="business" port="7881" dir=""/>

				<instance name="payment01" templateId="paymentTpl" />
				<instance name="payment02" templateId="paymentTpl" port="7882" dir="" />

				<instance name="settlement01" templateId="settlementTpl" />
				<instance name="settlement02" templateId="settlementTpl" port="7883" dir=""  />

				<instance name="zyAssignAccount01" templateId="zyAssignAccountTpl" />
				<instance name="zyAssignAccount02" templateId="zyAssignAccountTpl" port="10082" dir="/app/payment_2" />

				<instance name="zyAssignTrans01" templateId="zyAssignTransTpl" />
				<instance name="zyAssignTrans02" templateId="zyAssignTransTpl" port="10081" dir="" />
			</nodes>
		</server>
	</servers>
</application>